<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Algas - Catalogo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
:root{--verde-oscuro:#1e3a2e;--verde-medio:#2d5a42;--verde-claro:#f8fffe;--gris-1:#333;--rojo:#e74c3c;--whatsapp:#25d366}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial, sans-serif;background:var(--verde-claro);color:var(--gris-1)}
/* Header */
header{position:fixed;top:0;left:0;right:0;height:70px;background:rgba(255,255,255,0.9);backdrop-filter:blur(8px);
display:flex;align-items:center;justify-content:space-between;z-index:1000;padding:0 20px;border-bottom:1px solid rgba(0,0,0,.08)}
header img.logo{height:50px;width:50px;border-radius:50%;border:2px solid var(--verde-oscuro);box-shadow:0 2px 6px rgba(0,0,0,.25)}
header h1{font-family:'Playfair Display',serif;color:var(--verde-oscuro);font-size:1.8rem;flex:1;text-align:center;margin-right:50px}
/* Sections */
section{padding:100px 20px}
.section-title{font-size:2rem;margin-bottom:10px;color:var(--verde-oscuro);text-align:center}
/* Hero */
#inicio{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;
background:linear-gradient(160deg,#eafff8,#a9efcf);min-height:60vh;padding-top:100px}
#inicio h1{font-family:'Poppins',sans-serif;font-size:4rem;font-weight:600;color:#1e3a2e;text-shadow:2px 2px 6px rgba(0,0,0,0.25);margin:0}
.btn{padding:10px 16px;border-radius:8px;cursor:pointer;border:none;font-weight:bold}
.btn-primary{background:var(--verde-medio);color:#fff}
/* Catalog index */
.catalogo-indice{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:10px 0 20px}
.catalogo-indice .btn{background:#fff;border:1px solid #dcdcdc;color:#333}
.catalogo-indice .btn.active{background:var(--verde-medio);color:#fff;border-color:var(--verde-medio)}

/* Promo/Notas Camisas (restaurado) */
.promo-camisas{display:none;margin:10px auto 18px;max-width:1100px;padding:10px 14px;border:2px dashed #2d5a42;
background:#eef9f4;color:#1e3a2e;border-radius:10px;text-align:center;font-weight:700;letter-spacing:.3px}
.promo-camisas small{display:block;font-weight:normal;opacity:.85;margin-top:4px}
.promo-camisas-detail{display:none;margin:8px 0 12px;padding:10px 12px;border:2px dashed #2d5a42;
background:#eef9f4;color:#1e3a2e;border-radius:10px;font-weight:600}


/* Cart */
/* ... otros estilos del carrito ... */

.cart-item{

Â  display: flex; 
Â  flex-direction: column; 
Â  margin: 0; 
Â  gap: 0;
}

.cart-controls button {
    background: none !important; 
    color: var(--gris-1) !important;
    border-radius: 0 !important;
    width: 30px !important;
    height: 30px !important;
}

.cart-controls button:active {
    background: #f0f0f0 !important;
}



/* Grid */
.grid{display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
@media (max-width: 768px){ .grid{ grid-template-columns: repeat(2, 1fr); } }
.card{position:relative;background:#fff;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);
padding:14px;text-align:center;min-height:360px;display:flex;flex-direction:column;justify-content:flex-start;cursor:pointer}
.card img{width:100%;height:auto;max-height:240px;object-fit:contain;display:block;margin:0 auto 10px;border-radius:8px;background:#f4f4f4}
.card .product-name{font-weight:bold;margin:8px 0}
.card .product-price{color:var(--verde-medio);font-size:1.1rem;margin-bottom:6px}
/* Badges */
.badge{position:absolute;top:10px;left:10px;width:70px;height:70px;display:flex;align-items:center;justify-content:center;
font-size:0.8rem;font-weight:bold;color:#fff;text-transform:uppercase;border-radius:50%;animation:pulse 1.5s infinite;z-index:5}
.badge.{background:#e74c3c;box-shadow:0 0 12px rgba(231,76,60,0.8)}
.badge.especial{background:#2d5a42;box-shadow:0 0 12px rgba(45,90,66,0.8)}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
/* Detail */
#productDetail{display:none;padding:100px 20px}
.detail-content{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;grid-template-areas:'info image';gap:20px;align-items:start}
#detailImage{grid-area:image;overflow:hidden;position:relative}
/* Carousel */
.carousel{position:relative;width:100%;height:auto;overflow:hidden}
.carousel-track{display:flex;transition:transform .35s ease;gap:0;will-change:transform}
.carousel-slide{min-width:100%;user-select:none;flex:0 0 100%}
.carousel-slide img{width:100%;height:auto;max-height:70vh;object-fit:contain;border-radius:12px;background:#f4f4f4;display:block}
.carousel-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.6);color:#fff;border:2px solid rgba(255,255,255,.85);
box-shadow:0 2px 8px rgba(0,0,0,.35);z-index:2;border-radius:50%;width:42px;height:42px;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
.carousel-btn.prev{left:8px}
.carousel-btn.next{right:8px}
.carousel-dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
.carousel-dot{width:8px;height:8px;border-radius:50%;background:#ccc;cursor:pointer}
.carousel-dot.active{background:#2d5a42}
#detailImage img{width:100%;height:auto;max-height:70vh;object-fit:contain;border-radius:12px;display:block;margin:0 auto}
.detail-info{grid-area:info}
.detail-header{display:block;margin-bottom:8px}
.back-btn{background:#e74c3c;color:#fff;border:none;border-radius:6px;padding:8px 14px;font-weight:bold;cursor:pointer}
.back-btn:hover{background:#c0392b}
.detail-info h2{color:var(--verde-oscuro);margin:10px 0}
.detail-info .price{font-size:1.5rem;color:var(--verde-medio);margin:10px 0}
.payment-note{max-width:900px;margin:8px 0 16px;padding:8px 12px;border:1px solid #d8efe5;background:#eef9f4;border-radius:8px;font-size:.95rem;color:var(--gris-1)}
ul{padding-left:20px;margin:10px 0}
.detail-buttons{display:flex;flex-direction:column;gap:15px;margin-top:15px}
.detail-buttons .btn{width:100%}
.btn[disabled]{opacity:.55;cursor:not-allowed}
/* Sizes */
.sizes{display:flex;flex-wrap:wrap;gap:6px;justify-content:flex-start;margin:6px 0 8px}
.size-chip{width:30px;height:30px;border-radius:50%;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;font-size:.85rem;background:#fff;cursor:pointer}
.size-chip.selected{border-color:var(--verde-medio);background:#eaf6f0;font-weight:bold}
.size-warning{color:#e74c3c;font-size:.95rem;display:none;margin-top:4px}
@media (max-width:768px){.detail-content{grid-template-columns:1fr;grid-template-areas:'image' 'info'}}
/* Cart */
#cartFab{position:fixed;top:80px;right:20px;background:#fff;padding:10px 14px;border-radius:999px;box-shadow:0 4px 10px rgba(0,0,0,.2);cursor:pointer;z-index:2000}
#cartFab.bounce{animation:bounce .6s}
@keyframes bounce{0%{transform:scale(1)}30%{transform:scale(1.2)}60%{transform:scale(0.9)}100%{transform:scale(1)}}
.fab-count{background:#e74c3c;color:#fff;border-radius:50%;padding:2px 8px;margin-left:6px}
/* INICIO DEL REEMPLAZO */
/* INICIO DEL REEMPLAZO DEFINITIVO #cartModal y animaciones */
#cartModal{
    display: block;
    position: fixed;
    top: 0;
    right: 0; /* â¬…ï¸ ANCLADO AQUÃ: DERECHA */
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 3000;
    align-items: center;
    justify-content: flex-end; /* â¬…ï¸ EMPUJA EL PANEL A LA DERECHA */
    overscroll-behavior: contain;
    visibility: hidden; 
    opacity: 0;
    transition: visibility 0.3s, opacity 0.3s;
}
#cartModal.visible { /* â¬…ï¸ Clase necesaria para mostrar */
    visibility: visible;
    opacity: 1;
}
#cartModal .modal-content{
    background:#fff;
    border-radius:0;
    max-width: 420px;
    width: 100%;
    height: 100vh;
    padding: 20px;
    position: relative;
    max-height: 100vh;
    overflow: auto;
    -webkit-overflow-scrolling:touch;
    transform: translateX(100%); /* â¬…ï¸ COMIENZA 100% FUERA DE LA DERECHA */
    transition: transform 0.3s ease-out;
}
#cartModal.visible .modal-content { /* â¬…ï¸ Clase necesaria para deslizar */
    transform: translateX(0); /* â¬…ï¸ TERMINA EN POSICIÃ“N CERO (dentro de la derecha) */
}
/* FIN DEL REEMPLAZO DEFINITIVO */
/* FIN DEL REEMPLAZO */

#cartModal .close{
    position:absolute;
    top:10px;
    right:20px; /* â¬…ï¸ DEBE ESTAR ANCLADO A LA DERECHA (20px) */
    cursor:pointer;
    font-size:1.5rem ; 
    color: #333; 
    z-index: 3001;
}
.cart-item{
    display: flex; /* <--- Cambio: era flex */
    flex-direction: column; /* <--- Cambio: aÃ±adido */
    margin: 0; /* <--- Cambio: era 8px 0 */
    gap: 0; /* <--- Cambio: era 8px */
}
.cart-controls{display:flex;align-items:center;gap:6px}
.cart-controls button {
    width: 30px !important; /* <--- Cambio: era 28px */
    height: 30px !important; /* <--- Cambio: era 28px */
    background: none !important; 
    color: var(--gris-1) !important;
    border-radius: 0 !important;
}
.cart-controls button:active { /* <--- Nuevo estilo */
    background: #f0f0f0 !important;
}
.cart-controls button:hover{background:var(--verde-oscuro)}
.cart-controls span{min-width:24px;text-align:center;font-weight:bold}
.cart-total{font-weight:bold;font-size:1.2rem;margin-top:15px;text-align:right}
.cart-actions{display:flex;gap:10px;margin-top:20px}
.cart-actions button{flex:1}
/* WhatsApp FAB - circular, solo Ã­cono */
#whatsappFab{position:fixed;bottom:20px;right:20px;display:grid;place-items:center;width:60px;height:60px;padding:0;background:var(--whatsapp);color:#fff;border-radius:50%;cursor:pointer;z-index:2000;box-shadow:0 4px 10px rgba(0,0,0,.3)}
#whatsappFab img{height:28px;width:28px}
/* REEMPLAZAR #whatsappFab.lifted */
#whatsappFab.lifted{
    bottom: 120px;
    right: 440px; /* â¬…ï¸ VUELVE A LA IZQUIERDA PARA DAR ESPACIO AL CARRITO */
}
@media (max-width:768px){
    #whatsappFab.lifted{
        bottom: 140px;
        right: 40px; 
    }
}
/* Lock background scroll when modal open */
body.modal-open{position:fixed; width:100%; overflow:hidden; height:100vh; top:0; left:0; right:0}
/* Footer */
footer{background:var(--verde-oscuro);color:#fff;text-align:center;padding:20px;margin-top:40px}
footer a{color:#fff;text-decoration:underline}
</style>
</head>
<body>
<header>
  <img class="logo" src="https://i.ibb.co/SX5Rnw8x/Imagen-de-Whats-App-2025-09-02-a-las-18-04-18-f0b3a1ac.jpg" alt="Logo Algas">
  <h1>Algas</h1>
</header>
<section id="inicio">
  <div>
    <h1>Algas</h1>
    <button id="btnVerProductos" class="btn btn-primary" style="margin-top:20px;display:inline-block;font-size:1.1rem;padding:12px 20px;">Ver Productos â†’</button>
  </div>
</section>
<section id="productos">
  <h2 class="section-title">Nuestros Productos</h2>
  <div id="catalogoIndice" class="catalogo-indice"></div>
  <div id="promoCamisas" class="promo-camisas">El PRECIO mostrado en Camisas corresponde a abonar en 3 cuotas o con Transferencia 10% de descuento.</div>
  <div id="productsGrid" class="grid"></div>
</section>
<section id="productDetail">
  <div class="detail-content">
    <div id="detailImage"></div>
    <div class="detail-info">
      <div class="detail-header"><button id="backHome" class="back-btn" aria-label="Volver al inicio">â† Volver</button></div>
      <h2 id="detailName"></h2>
      <div class="price" id="detailPrice"></div>
<div id="colorSelector" style="display:none; margin: 15px 0;">
    <h4 style="font-size: 1rem; color: #1e3a2e; margin-bottom: 8px;">COLOR: <span id="selectedColorName" style="font-weight: bold;"></span></h4>
    <div id="colorChipsContainer" style="display: flex; gap: 12px; align-items: center;">
        </div>
</div>
<div id="detailModelInfo" style="margin:6px 0;font-size:0.95rem;color:#2d5a42;font-weight:600"></div>
      <div class="payment-note">
        <strong>Medios de pago</strong>
<ul style="margin-top:6px;list-style:none;padding-left:0;">
Â  Â  Â  Â  Â  <li id='pagoEfectivo'>Efectivo ğŸ’µ</li>
Â  Â  Â  Â  Â  <li id='pagoTarjeta'>Tarjeta ğŸ’³</li>
Â  Â  Â  Â  Â  <li id='pagoTransferencia'>Transferencia</li>
        </ul>
      </div>
<div id="paymentPriceNote" class="promo-camisas-detail" style="display:none;margin-top:8px;">El <strong>PRECIO mostrado en Camisas</strong> corresponde a abonar en <strong>3 cuotas</strong> o con <strong>Transferencia 10% de descuento</strong>.</div>
      <div id="detailSizes" class="sizes"></div>
      <div id="sizeWarning" class="size-warning">âš ï¸ SeleccionÃ¡ un talle antes de agregar al carrito.</div>
      <p id="detailDesc"></p>
      <ul id="detailFeatures"></ul>
      <div class="detail-buttons">
        <button id="addBtn" class="btn btn-primary" onclick="addToCart(currentProduct)">ğŸ›’ Agregar al Carrito</button>
        <button class="btn" style="background:#25d366;color:#fff;display:flex;align-items:center;gap:8px;justify-content:center" onclick="consultarWhatsApp()">
          <img src="https://i.ibb.co/BV91S86b/image.png" alt="WhatsApp" style="height:20px;width:20px">Consultar por WhatsApp
        </button>
      </div>
    </div>
  </div>
</section>
<div id="cartModal">
  <div class="modal-content" role="dialog" aria-labelledby="cartTitle">
    <span class="close" onclick="toggleCart()" aria-label="Cerrar">Ã—</span>
    <h2 id="cartTitle">ğŸ›’ Mi Carrito</h2>
    <div id="cartItems"></div>
    <div class="cart-total" id="cartTotal"></div>
    <div class="cart-actions">
      <button class="btn" style="background:#e74c3c;color:#fff" onclick="clearCart()">ğŸ—‘ï¸ Vaciar Carrito</button>
      <button class="btn" style="background:#25d366;color:#fff" onclick="checkout()"> Finalizar Compra</button>
    </div>
  </div>
</div>
<footer>
  ğŸ“ DirecciÃ³n: <a href="https://www.google.com/maps/search/?api=1&query=Av+Centenario+301,+San+Isidro,+Argentina" target="_blank">Av Centenario 301, San Isidro</a><br>
  <a href="https://wa.me/5491161521424" target="_blank"><img src="https://i.ibb.co/BV91S86b/image.png" style="height:20px;width:20px;vertical-align:middle"> +54 9 11 6152-1424</a><br>
  Â© 2025 Algas. Todos los derechos reservados.<br>
  PÃ¡gina web creada por Uziel Romano. Para mÃ¡s informaciÃ³n al: <a href="https://wa.me/5491134223812?text=hola%20buenas%20como%20va%20vi%20su%20pagina%20de%20catalogo%20de%20algas%20y%20quer%C3%ADa%20tener%20mas%20informacion" target="_blank">11 3422-3812</a>
</footer>
<button id="cartFab" onclick="toggleCart()">ğŸ›’ Carrito <span id="cartCount" class="fab-count">0</span></button>
<button id="whatsappFab" aria-label="Abrir WhatsApp"><img src="https://i.ibb.co/BV91S86b/image.png" alt="WhatsApp"></button>

<script>
// === Modelo + Precio dinÃ¡mico ===
function updateModelInfo(modelo, precio){
Â  try{
Â  Â  const info=document.getElementById('detailModelInfo');
Â  Â  if(info){
Â  Â  Â  if(modelo){
Â  Â  Â  Â  // Corregido: Usar backticks para template literal (si aplica, aunque aquÃ­ no era necesario)
Â  Â  Â  Â  info.textContent='Modelo seleccionado: '+modelo+' â€” $'+precio;
Â  Â  Â  }else{
Â  Â  Â  Â  info.textContent='';
Â  Â  Â  }
Â  Â  }
Â  Â  const promo=document.getElementById('paymentPriceNote');
Â  Â  if(promo && currentProduct && currentProduct.categoria==='camisas'){
Â  Â  Â  if(modelo){
Â  Â  Â  Â  promo.innerHTML=`El <strong>PRECIO mostrado en Camisas</strong> (Modelo ${modelo}) corresponde a abonar en <strong>3 cuotas</strong> o con <strong>Transferencia 10% de descuento</strong>.`; // Usar backticks si hay ${}
Â  Â  Â  }else{
Â  Â  Â  Â  promo.innerHTML='El <strong>PRECIO mostrado en Camisas</strong> corresponde a abonar en <strong>3 cuotas</strong> o con <strong>Transferencia 10% de descuento</strong>.';
Â  Â  Â  }
Â  Â  }
Â  }catch(e){ console.error("Error en updateModelInfo:", e); }
}

function updateMediosPago(categoria){
Â  try{
Â  Â  const liEfectivo=document.getElementById('pagoEfectivo');
Â  Â  const liTarjeta=document.getElementById('pagoTarjeta');
Â  Â  const liTrans=document.getElementById('pagoTransferencia');
Â  Â  if(!liTarjeta || !liTrans || !liEfectivo) return;

Â  Â  // Resetear
Â  Â  liEfectivo.textContent='Efectivo ğŸ’µ';
Â  Â  liTarjeta.textContent='Tarjeta ğŸ’³';
Â  Â  liTrans.textContent='Transferencia';

Â  Â  if(categoria==='camisas'){
Â  Â  Â  liTarjeta.textContent='Tarjeta ğŸ’³ (en 3 cuotas)';
Â  Â  Â  liTrans.textContent='Transferencia (10% de descuento en Camisas)';
Â  Â  }
Â  Â  else if(currentProduct && currentProduct.id === 'chomba-algodon-premium-colores'){
Â  Â  Â  liEfectivo.innerHTML='Efectivo ğŸ’µ <span style="font-weight:bold; color: #e74c3c;">($20.000)</span>';
Â  Â  Â  liTarjeta.innerHTML='Tarjeta ğŸ’³ <span style="font-weight:bold; color: #2d5a42;">($25.000 en 3 cuotas)</span>';
Â  Â  Â  liTrans.innerHTML='Transferencia <span style="font-weight:bold; color: #e74c3c;">($20.000)</span>';
Â  Â  }
Â  Â  else if(currentProduct && currentProduct.id === 'traje-thomson-williams-soft'){
Â  Â  Â  liEfectivo.innerHTML='Efectivo ğŸ’µ <span style="font-weight:bold; color: #e74c3c;">($230.000)</span>';
Â  Â  Â  liTarjeta.innerHTML='Tarjeta ğŸ’³ <span style="font-weight:bold; color: #2d5a42;">($260.000 en 3 pagos)</span>';
Â  Â  Â  liTrans.innerHTML='Transferencia <span style="font-weight:bold; color: #e74c3c;">($230.000)</span>';
Â  Â  }
   
Â  Â  else if(currentProduct && currentProduct.id === 'campera-rompevientos-buckingham-nueva'){
Â  Â  Â  liEfectivo.innerHTML='Efectivo ğŸ’µ <span style="font-weight:bold; color: #e74c3c;">($50.000)</span>';
Â  Â  Â  liTarjeta.innerHTML='Tarjeta ğŸ’³ <span style="font-weight:bold; color: #2d5a42;">($60.000 en 3 pagos)</span>';
Â  Â  Â  liTrans.innerHTML='Transferencia/DepÃ³sito <span style="font-weight:bold; color: #e74c3c;">($50.000)</span>';
Â  Â  }
    // LOGICA PIMA (XXXL)
    else if(currentProduct && currentProduct.id === 'chomba-hilo-pima'){
        const transferPrice = 50000;
        let cardPrice = (currentProduct.sizePrices && selectedSize) ? currentProduct.sizePrices[selectedSize] : currentProduct.price;

        liEfectivo.innerHTML=`Efectivo ğŸ’µ <span style="font-weight:bold; color: #e74c3c;">(${fmt(transferPrice)})</span>`;
        liTrans.innerHTML=`Transferencia <span style="font-weight:bold; color: #e74c3c;">(${fmt(transferPrice)})</span>`;
        
        if (!selectedSize) {
            liTarjeta.innerHTML=`Tarjeta ğŸ’³ <span style="font-weight:bold; color: #2d5a42;">(Seleccionar talle para ver precio)</span>`;
        } else {
            liTarjeta.innerHTML=`Tarjeta ğŸ’³ <span style="font-weight:bold; color: #2d5a42;">(${fmt(cardPrice)} en 3 pagos)</span>`;
        }
    }
Â  }catch(e){ console.error("Error en updateMediosPago:", e); }
}

// === Helpers PROMO CAMISAS (restaurado) ===
function showCamisasPromoInGrid(cat){
Â  try{
Â  Â  const el = document.getElementById('promoCamisas');
Â  Â  if(!el) return;
Â  Â  el.style.display = (cat==='camisas' || cat==='all') ? 'block' : 'none';
Â  }catch(e){ console.error("Error en showCamisasPromoInGrid:", e); }
}
function showCamisasPromoInDetail(isCamisa){
Â  try{
Â  Â  const el = document.getElementById('paymentPriceNote');
Â  Â  if(!el) return;
Â  Â  el.style.display = isCamisa ? 'block' : 'none';
Â  }catch(e){ console.error("Error en showCamisasPromoInDetail:", e); }
}

history.scrollRestoration='manual';
const WA_NUMBER='5491161521424';
const CURRENCY={style:'currency',currency:'ARS',maximumFractionDigits:0,minimumFractionDigits:0};
const fmt=(n)=> n.toLocaleString('es-AR',CURRENCY);
// State
let cart=[]; let currentProduct=null; let prevScrollY=0; let selectedSize=null; let selectedModel=null;
let __cartLockScrollY=0;
function lockBodyScroll(){
  __cartLockScrollY = window.scrollY || window.pageYOffset || 0;
  document.body.classList.add('modal-open');
  // CORREGIDO: Usar backticks
  document.body.style.top = `-${__cartLockScrollY}px`;
}
function unlockBodyScroll(){
  document.body.classList.remove('modal-open');
  const y = __cartLockScrollY || 0;
  document.body.style.top='';
  window.scrollTo(0, y);
}
// ===== CATÃLOGO =====
const PRODUCTS=[
Â  { id:'campera-buckingham', categoria:'camperas', name:'Campera Doble Pechera Buckingham Polo Club', price:45000,
Â  Â  image:'https://i.ibb.co/8DCZtDLT/Imagen-de-Whats-App-2025-09-02-a-las-15-04-22-d86e4fea.jpg',
Â  Â  description:'Campera doble pechera de la marca Buckingham Polo Club, pensada para brindar abrigo y estilo. Disponible en talle XL.',
Â  Â  features:['DiseÃ±o de doble pechera para mayor protecciÃ³n tÃ©rmica','Marca Buckingham Polo Club, sÃ­mbolo de elegancia','Materiales resistentes y costuras reforzadas','Disponible en talle XL','10%Â  pagando en efectivo o transferencia'],
Â  Â  sizes:['XL'],
Â  Â  tag:''
Â  },
Â  { id:'campera-impermeable', categoria:'camperas', name:'Campera Impermeable con Capucha Desmontable Buckingham Polo Club', price:40000,
Â  Â  image:'https://i.ibb.co/j9m1hd5s/Imagen-de-Whats-App-2025-09-02-a-las-15-04-22-3e106fdf.jpg',
Â  Â  description:'Campera impermeable con capucha desmontable de Buckingham Polo Club. Ideal para lluvia y frÃ­o. Disponible en XL y color azul.',
Â  Â  features:['Material impermeable de alta calidad','Capucha desmontable con cierre oculto','ConfecciÃ³n resistente y cÃ³moda','Marca Buckingham Polo Club','Disponible en talle XL y en color azul'],
Â  Â  sizes:['XL'],
Â  Â  tag:null
Â  },
Â  { id:'campera-backing', categoria:'camperas', name:'Campera Backing Polo Club â€” Oferta Especial', price:25000,
Â  Â  image:'https://i.ibb.co/nNZkfLKQ/Imagen-de-Whats-App-2025-09-02-a-las-15-04-22-98e2bc66.jpg',
Â  Â  description:'Campera Backing Polo Club en color Ãºnico. Oferta especial desde talle S hasta doble XL.',
Â  Â  features:['DiseÃ±o exclusivo de Backing Polo Club','Oferta limitada a un Ãºnico color','Disponible desde talle S hasta doble XL','ConfecciÃ³n resistente y cÃ³moda','Precio promocional especial'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'campera-buckingham-reversible', categoria:'camperas', name:'Campera Buckingham Polo Club â€” Reversible', price:35000,
Â  Â  image:'https://i.ibb.co/60gWC3Cg/Imagen-de-Whats-App-2025-09-02-a-las-15-04-22-9543c4f7.jpg',
Â  Â  description:'Campera reversible de Buckingham Polo Club, ideal para diferentes estilos y situaciones. Disponible en talles S a doble XL.',
Â  Â  features:['DiseÃ±o reversible para dos estilos','Marca Buckingham Polo Club, sinÃ³nimo de calidad','Ideal para climas frÃ­os y moderados','Disponible en talles desde S a XXL','Precio increÃ­ble $35.000'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:null
Â  },
Â  { id:'campera-engomada', categoria:'camperas', name:'Campera Engomada Buckingham Polo Club', price:45000,
Â  Â  image:'https://i.ibb.co/xShQ1PGx/Imagen-de-Whats-App-2025-09-02-a-las-15-04-23-01309848.jpg',
Â  Â  description:'Campera engomada Buckingham Polo Club, del talle S al doble XL. TerminaciÃ³n engomada con excelente resistencia y estilo.',
Â  Â  features:['TerminaciÃ³n engomada de alta resistencia','Marca Buckingham Polo Club','Disponible del S al XXL','Interior cÃ³modo para uso diario','Precio especial $45.000'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:null
Â  },
Â  { id:'campera-capucha-desmontable', categoria:'camperas', name:'Campera Buckingham Polo Club â€” Capucha Desmontable', price:40000,
Â  Â  image:'https://i.ibb.co/tw0QJtkp/Imagen-de-Whats-App-2025-09-02-a-las-15-04-23-995082e4.jpg',
Â  Â  description:'Campera con capucha desmontable e impermeable de Buckingham Polo Club, con precio increÃ­ble. Ideal para lluvia y uso diario.',
Â  Â  features:['Capucha desmontable para mayor versatilidad','Tejido impermeable para lluvia','Marca Buckingham Polo Club','ConfecciÃ³n cÃ³moda para uso diario','Precio increÃ­ble: $40.000'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:null
Â  },
Â  { id:'campera-uniqlo-impermeable', categoria:'camperas', name:'Campera Impermeable SÃ­mil Uniqlo Buckingham Polo Club', price:25000,
Â  Â  image:'https://i.ibb.co/nN4sKcMj/Imagen-de-Whats-App-2025-09-02-a-las-15-04-23-bf6f3281.jpg',
Â  Â  description:'Campera impermeable sÃ­mil Uniqlo de Buckingham Polo Club, disponible del talle S al XXL. Precio imbatible: $25.000.',
Â  Â  features:['Inspirada en el estilo Uniqlo','Material impermeable de alta calidad','Disponible del talle S al XXL','ConfecciÃ³n cÃ³moda y resistente','Precio imbatible $25.000'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:null
Â  },
Â  { id:'campera-impermeable-oferta', categoria:'camperas', name:'Campera Impermeable â€” Oferta Limitada', price:35000,
Â  Â  image:'https://i.ibb.co/zVHHrw0V/Imagen-de-Whats-App-2025-09-04-a-las-11-06-23-83ac75f2.jpg',
Â  Â  description:'Campera impermeable. Oferta limitada desde el talle S al doble XL. Precio promocional $35.000 (transferencia o efectivo).',
Â  Â  features:['Impermeable de alta calidad','Oferta limitada','Disponible desde talle S hasta doble XL','Precio promocional especial $35.000','Pagando con transferencia o efectivo'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'campera-rompevientos', categoria:'camperas', name:'Rompevientos Buckingham Polo Club', price:40000,
Â  Â  image:'https://i.ibb.co/DPQ8mYZm/Imagen-de-Whats-App-2025-09-04-a-las-10-33-16-0ff45917.jpg',
Â  Â  description:'Varios modelos, talles y colores, del Small al XXL. Â¡IncreÃ­ble oferta $40.000!',
Â  Â  features:['Rompevientos liviano','Varios modelos y colores','Talles S al XXL','Secado rÃ¡pido','Excelente relaciÃ³n precio-calidad'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'chaleco-impermeable', categoria:'chalecos', name:'Chaleco Impermeable Buckingham Polo Club', price:35000,
Â  Â  image:'https://i.ibb.co/JwPW5XPS/Imagen-de-Whats-App-2025-09-04-a-las-10-33-17-ba7943c4.jpg',
Â  Â  description:'Ãšnico color. Precio $35.000.',
Â  Â  features:['Tejido impermeable','Ãšnico color','Marca Buckingham Polo Club','Liviano y cÃ³modo','Ideal para lluvia y viento'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'camisaco-corderito', categoria:'camperas', name:'Camisaco forrado en Corderito', price:35000,
Â  Â  image:'https://i.ibb.co/jqdFsKW/Imagen-de-Whats-App-2025-09-04-a-las-10-33-17-1b371c5b.jpg',
Â  Â  description:'Ãšltimas unidades. Del talle S al XL.',
Â  Â  features:['Forrado en corderito','Ãšltimas unidades','Del S al XL','Abrigo suave y cÃ³modo'],
Â  Â  sizes:['S','M','L','XL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'remera-mc-premium', categoria:'remeras', name:'Remera Manga Corta - Primera Marca (AlgodÃ³n Peinado)', price:20000,
Â  Â  image:'https://i.ibb.co/k62gp4Zw/Imagen-de-Whats-App-2025-09-04-a-las-22-34-46-2e91c20e.jpg',
Â  Â  description:'Oferta especial. AlgodÃ³n peinado, calidad primera marca.',
Â  Â  features:['AlgodÃ³n peinado','Primera marca','Oferta especial','Corte clÃ¡sico y cÃ³modo'],
Â  Â  sizes:['XS','S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'camisa-rochas', categoria:'camisas', name:'Camisa primera marca Rochas', price:null,
Â  Â  image:'https://i.ibb.co/qMzbzg3g/Imagen-de-Whats-App-2025-09-09-a-las-23-41-40-dc17556f.jpg',
Â  Â  images:[
Â  Â  Â  {src:'https://i.ibb.co/qMzbzg3g/Imagen-de-Whats-App-2025-09-09-a-las-23-41-40-dc17556f.jpg', model:'blanca con rayas'},
Â  Â  Â  {src:'https://i.ibb.co/BHFDdnGT/Imagen-de-Whats-App-2025-09-09-a-las-23-41-40-cdb0bb08.jpg', model:'blanca con cuadraditos azules'},
Â  Â  Â  {src:'https://i.ibb.co/DDpnsxc3/Imagen-de-Whats-App-2025-09-09-a-las-23-41-40-a689e4c3.jpg', model:'blanca con cuadraditos celestes'},
Â  Â  Â  {src:'https://i.ibb.co/0yzWkbfg/Imagen-de-Whats-App-2025-09-09-a-las-23-41-40-9e7fafbe.jpg', model:'gris con cuadraditos'},
Â  Â  Â  {src:'https://i.ibb.co/mVQMfzy2/Imagen-de-Whats-App-2025-09-09-a-las-23-41-41-e4f63b4d.jpg', model:'celeste rayada'},
Â  Â  Â  {src:'https://i.ibb.co/sDTfj5w/Imagen-de-Whats-App-2025-09-11-a-las-17-19-20-3f1a47d0.jpg', model:'azul rayada'},
Â  Â  Â  {src:'https://i.ibb.co/tTMVZ4y5/Imagen-de-Whats-App-2025-09-11-a-las-17-19-21-22aaa98f.jpg', model:'marron lisa'},
Â  Â  Â  {src:'https://i.ibb.co/Mx2F0PXH/Imagen-de-Whats-App-2025-09-11-a-las-17-19-21-9ea15da8.jpg', model:'blanca lisa'}
Â  Â  ],
Â  Â  description:'Marca Rochas. 80% algodÃ³n. Varios tonos. Talles del S al XXL.',
Â  Â  features:['Marca Rochas','80% algodÃ³n','Varios tonos disponibles','Talles del S al XXL','ConsultÃ¡ el precio'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'camisa-rocco', categoria:'camisas', name:'Camisa marca Rocco â€” Oferta especial', price:39999,
Â  Â  image:'https://i.ibb.co/gZv8X62R/Imagen-de-Whats-App-2025-09-10-a-las-16-31-37-d034c8e0.jpg',
Â  Â  images:[
Â  Â  Â  {src:'https://i.ibb.co/gZv8X62R/Imagen-de-Whats-App-2025-09-10-a-las-16-31-37-d034c8e0.jpg', model:'blanca con rayas'},
Â  Â  Â  {src:'https://i.ibb.co/mrM7mpgh/Imagen-de-Whats-App-2025-09-10-a-las-16-31-38-4ab03b07.jpg', model:'negra con cuadraditos'},
Â  Â  Â  {src:'https://i.ibb.co/xq52DPBJ/Imagen-de-Whats-App-2025-09-10-a-las-16-31-38-99aed11c.jpg', model:'celeste lisa'},
Â  Â  Â  {src:'https://i.ibb.co/tTmYf0T4/Imagen-de-Whats-App-2025-09-10-a-las-16-31-38-dd398098.jpg', model:'blanca lisa'},
Â  Â  Â  {src:'https://i.ibb.co/23M4Gwv0/Imagen-de-Whats-App-2025-09-10-a-las-16-31-39-0476913f.jpg', model:'negra con rayas'}
Â  Â  ],
Â  Â  description:'Camisas marca Rocco. Oferta especial $39.999. Talles del S al XXL.',
Â  Â  features:['Marca Rocco','Varios tonos y diseÃ±os','Talles del S al XXL','Oferta especial $39.999'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  { id:'camisa-ysl', categoria:'camisas', name:'Camisa Yves Saint Laurent â€” 100% AlgodÃ³n', priceRange:[50000,70000],
Â  Â  image:'https://i.ibb.co/tM3rFddt/Imagen-de-Whats-App-2025-09-15-a-las-16-22-09-bd64a629.jpg',
Â  Â  images:[
Â  Â  Â  {src:'https://i.ibb.co/tM3rFddt/Imagen-de-Whats-App-2025-09-15-a-las-16-22-09-bd64a629.jpg', model:'modelo 01'},
Â  Â  Â  {src:'https://i.ibb.co/LzyYt9L1/Imagen-de-Whats-App-2025-09-15-a-las-16-22-10-14e1a743.jpg', model:'modelo 02'},
Â  Â  Â  {src:'https://i.ibb.co/xqGrQLNV/Imagen-de-Whats-App-2025-09-15-a-las-16-22-10-d9c3ca50.jpg', model:'modelo 03'},
Â  Â  Â  {src:'https://i.ibb.co/YBzK92Bw/Imagen-de-Whats-App-2025-09-15-a-las-16-22-10-478a6c88.jpg', model:'modelo 04'},
Â  Â  Â  {src:'https://i.ibb.co/mV3NyWv7/Imagen-de-Whats-App-2025-09-15-a-las-16-22-10-62b4189e.jpg', model:'modelo 05'},
Â  Â  Â  {src:'https://i.ibb.co/27LnnSdj/Imagen-de-Whats-App-2025-09-15-a-las-16-22-11-3591d70d.jpg', model:'modelo 06'},
Â  Â  Â  {src:'https://i.ibb.co/pvhHXhpx/Imagen-de-Whats-App-2025-09-15-a-las-16-22-11-c53aee86.jpg', model:'modelo 07'},
Â  Â  Â  {src:'https://i.ibb.co/xcFR2w4/Imagen-de-Whats-App-2025-09-15-a-las-16-22-11-3050943c.jpg', model:'modelo 08'},
Â  Â  Â  {src:'https://i.ibb.co/3ydTxVQ1/Imagen-de-Whats-App-2025-09-15-a-las-16-22-12-feb4e7e4.jpg', model:'modelo 09'},
Â  Â  Â  {src:'https://i.ibb.co/TxWMdDVR/Imagen-de-Whats-App-2025-09-15-a-las-16-22-12-d79c3e84.jpg', model:'modelo 10'},
Â  Â  Â  {src:'https://i.ibb.co/BVxSvKFC/Imagen-de-Whats-App-2025-09-15-a-las-16-22-12-abdb9f42.jpg', model:'modelo 11'},
Â  Â  Â  {src:'https://i.ibb.co/8LTFT59N/Imagen-de-Whats-App-2025-09-15-a-las-16-22-13-744a2e8e.jpg', model:'modelo 12'},
Â  Â  Â  {src:'https://i.ibb.co/qqfVWnC/Imagen-de-Whats-App-2025-09-15-a-las-16-22-13-35fe9016.jpg', model:'modelo 13'},
Â  Â  Â  {src:'https://i.ibb.co/TMNmnWkD/Imagen-de-Whats-App-2025-09-15-a-las-16-22-13-47d26d6f.jpg', model:'modelo 14'},
Â  Â  Â  {src:'https://i.ibb.co/ZDnW7rj/Imagen-de-Whats-App-2025-09-15-a-las-16-22-13-395d716f.jpg', model:'modelo 15'},
Â  Â  Â  {src:'https://i.ibb.co/mLchkJf/Imagen-de-Whats-App-2025-09-15-a-las-16-22-14-e09a9aaf.jpg', model:'modelo 16'},
Â  Â  Â  {src:'https://i.ibb.co/hxLX8fDt/Imagen-de-Whats-App-2025-09-15-a-las-16-22-14-3f416705.jpg', model:'modelo 17'}
Â  Â  ],
Â  Â  description:'SastrerÃ­a de lujo en algodÃ³n 100% de fibra larga. TerminaciÃ³n impecable en cuello y puÃ±os; corte moderno con estructura clÃ¡sica.',
Â  Â  features:['100% algodÃ³n premium','Costuras reforzadas','Conserva forma y color','Corte moderno'],
Â  Â  sizes:['S','M','L','XL','XXL'],
Â  Â  tag:'especial'
Â  },
Â  {
Â  Â  id: 'chomba-algodon-premium-colores',
Â  Â  categoria: 'chombas',
Â  Â  name: 'Chomba 100% AlgodÃ³n (Varios Colores)',
Â  Â  price: 25000,
Â  Â  image: 'https://i.ibb.co/nGq637f/Imagen-de-Whats-App-2025-10-26-a-las-15-09-30-ca057623.jpg',
Â  Â  images:[
Â  Â  Â  {src: 'https://i.ibb.co/nGq637f/Imagen-de-Whats-App-2025-10-26-a-las-15-09-30-ca057623.jpg', model: 'Gris'},
Â  Â  Â  {src: 'https://i.ibb.co/xKdJ0pHj/Imagen-de-Whats-App-2025-10-26-a-las-16-28-04-0908ebeb.jpg', model: 'Rosa'},
Â  Â  Â  {src: 'https://i.ibb.co/DPX5DP9h/Imagen-de-Whats-App-2025-10-26-a-las-16-39-34-6555552d.jpg', model: 'Negro'},
Â  Â  Â  {src: 'https://i.ibb.co/Dg6Bfycy/Imagen-de-Whats-App-2025-10-26-a-las-16-43-49-eeb476ee.jpg', model: 'Blanco'},
Â  Â  Â  {src: 'https://i.ibb.co/8n6Ftqvz/Imagen-de-Whats-App-2025-10-26-a-las-18-10-17-385cf442.jpg', model: 'Naranja'},
Â  Â  Â  {src: 'https://i.ibb.co/mV7RgNV4/Imagen-de-Whats-App-2025-10-26-a-las-18-10-17-5dbb78fe.jpg', model: 'Bordo'},
Â  Â  Â  {src: 'https://i.ibb.co/TqPrQPZ1/Imagen-de-Whats-App-2025-10-26-a-las-18-10-17-73d49d04.jpg', model: 'Celeste'},
Â  Â  Â  {src: 'https://i.ibb.co/707vBmd/Imagen-de-Whats-App-2025-10-26-a-las-18-10-17-9c9a251f.jpg', model: 'Mostaza'}
Â  Â  ],
Â  Â  description: 'Una chomba premium confeccionada en 100% algodÃ³n puro, ofreciendo una suavidad y durabilidad excepcionales. Calidad superior con increÃ­bles resultados en confort y calce.',
Â  Â  features: [
Â  Â  Â  'ConfecciÃ³n 100% algodÃ³n premium',
Â  Â  Â  'Calidad superior: increÃ­bles resultados y confort',
Â  Â  Â  'Amplia variedad de colores disponibles',
Â  Â  Â  'Talles disponibles del S al XXXL'
Â  Â  ],
Â  Â  sizes: ['S', 'M', 'L', 'XL', 'XXL','XXXL'],
Â  Â  tag: 'especial'
Â  }
  ,
  {
    id: 'traje-thomson-williams-soft', // ID Ãºnico
    categoria: 'trajes', // Nueva categorÃ­a
    name: 'Traje Soft Thomson & Williams', // Nombre del producto
    price: 260000, // Precio de lista (tarjeta)

    // --- IMÃGENES ---
    // Imagen principal para la grilla (Verde)
    image: 'https://i.ibb.co/3yV4d7px/Imagen-de-Whats-App-2025-10-27-a-las-16-46-31-86af5f26.jpg',

    // ImÃ¡genes para el carrusel (como las camisas)
    images: [
      {src: 'https://i.ibb.co/3yV4d7px/Imagen-de-Whats-App-2025-10-27-a-las-16-46-31-86af5f26.jpg', model: 'Verde'},
      {src: 'https://i.ibb.co/GfCt2RCv/Imagen-de-Whats-App-2025-10-27-a-las-16-46-31-f1ff27e2.jpg', model: 'Bordo'},
      {src: 'https://i.ibb.co/Fbkq9XG6/Imagen-de-Whats-App-2025-10-27-a-las-16-46-32-f15817f9.jpg', model: 'Gris'},
      {src: 'https://i.ibb.co/hFLjb4sD/Imagen-de-Whats-App-2025-10-27-a-las-16-46-32-1bce43b6.jpg', model: 'Celeste'},
      {src: 'https://i.ibb.co/7tRngXB2/Imagen-de-Whats-App-2025-10-27-a-las-18-21-49-ba86bce2.jpg', model: 'Marron'}
    ],
    // --- FIN IMÃGENES ---

    description: 'Traje soft de calidad insuperable de la marca Thomson & Williams. Un corte moderno y cÃ³modo, perfecto para cualquier ocasiÃ³n formal. Disponible en una amplia gama de talles.',
    features: [
      'Marca: Thomson & Williams',
      'Calidad insuperable',
      'Corte soft moderno y confortable',
      'Precio Tarjeta: $260.000 (3 pagos)',
      'Promo Efectivo/Transferencia: $230.000',
      'Talles disponibles: 46 al 66'
    ],
    // Generamos los talles del 46 al 66
    sizes: ['46', '48', '50', '52', '54', '56', '58', '60', '62', '64', '66'],
    tag: 'especial' // Etiqueta por la promociÃ³n
  }
  , // <--- Coma separadora del producto anterior
  {
    id: 'chomba-hilo-pima',
    categoria: 'chombas',
    name: 'Chomba Hilo Pima Peruano Original Thomson & Williams',
    price: 60000, // Precio base
    
    // Precios segÃºn talle
    sizePrices: {
      'M': 60000, 'L': 60000, 'XL': 60000, 'XXL': 60000, 'XXXL': 70000 
    },
    
    image: 'https://i.ibb.co/Y40RWhpM/Imagen-de-Whats-App-2025-11-24-a-las-16-16-56-ca4ca3ea.jpg',
    
    images:[
      {src: 'https://i.ibb.co/Y40RWhpM/Imagen-de-Whats-App-2025-11-24-a-las-16-16-56-ca4ca3ea.jpg', model: 'Rosa PÃ¡lido'},
      {src: 'https://i.ibb.co/xtKFszk3/Imagen-de-Whats-App-2025-11-24-a-las-16-16-56-f7cc5cd9.jpg', model: 'Beige / Arena'},
      {src: 'https://i.ibb.co/hFG1GDgr/Imagen-de-Whats-App-2025-11-24-a-las-16-16-57-5870fac9.jpg', model: 'celeste Claro'},
      {src: 'https://i.ibb.co/20nybJWM/Imagen-de-Whats-App-2025-11-24-a-las-16-16-57-214d8f5c.jpg', model: 'Blanco'},
      {src: 'https://i.ibb.co/ZpsBqG60/Imagen-de-Whats-App-2025-11-24-a-las-16-16-57-1b59fcb3.jpg', model: 'Gris '},
      {src: 'https://i.ibb.co/MxmRwfpG/Imagen-de-Whats-App-2025-11-24-a-las-16-16-57-e3d43251.jpg', model: 'Verde Militar'},
      {src: 'https://i.ibb.co/TDVsBLfW/Imagen-de-Whats-App-2025-11-24-a-las-16-16-58-7c50772d.jpg', model: 'Azul Marino '},
      {src: 'https://i.ibb.co/sv7njSDn/Imagen-de-Whats-App-2025-11-24-a-las-16-16-58-f09e8f53.jpg', model: 'Azul claro'},
      {src: 'https://i.ibb.co/67pH4rYm/Imagen-de-Whats-App-2025-11-24-a-las-16-32-08-b3b88eb8.jpg', model: ' Negro'}
    ],
    description: 'Chomba confeccionada con Hilo Pima Peruano legÃ­timo, un producto excepcional, ofreciendo un tacto suave y una durabilidad superior.',
    features: [
      'Material: Hilo Pima Peruano legÃ­timo (producto excepcional)',
      'MÃ¡xima suavidad y transpirabilidad',
      'Precio Promocional (Efectivo/Transferencia): $50.000',
      'Precio Tarjeta varÃ­a segÃºn talle (M-XXL: $60.000 / XXXL: $70.000)',
      'Talles disponibles: M al XXXL'
    ],
    sizes: ['M', 'L', 'XL', 'XXL', 'XXXL'],
    tag: 'especial'
  },
{
  id: 'campera-rompevientos-buckingham-nueva', 
  categoria: 'camperas', 
  name: 'Campera Rompevientos Buckingham Polo Club - Impermeable', 
  price: 60000, // Precio Tarjeta
  
  // Imagen principal (usamos la primera para la grilla)
  image: 'https://i.ibb.co/MkWF08Lm/Imagen-de-Whats-App-2025-12-14-a-las-14-31-59-f5d77cab.jpg',
  
  // ImÃ¡genes y Modelos/Colores para el carrusel
  images: [
    {src: 'https://i.ibb.co/MkWF08Lm/Imagen-de-Whats-App-2025-12-14-a-las-14-31-59-f5d77cab.jpg', model: 'Mostaza y Blanco'},
    {src: 'https://i.ibb.co/hnBsNS8/Imagen-de-Whats-App-2025-12-14-a-las-14-31-59-5ea91511.jpg', model: 'Rojo y Azul'},
    {src: 'https://i.ibb.co/0j6ZFGc9/Imagen-de-Whats-App-2025-12-14-a-las-14-32-00-1bc18621.jpg', model: 'Gris y Blanco'}
  ],
  
  description: 'Campera rompevientos de la primera marca Buckingham Polo Club. DiseÃ±o impermeable, con capucha desmontable y de calidad insuperable.',
  features: [
    'Marca: Buckingham Polo Club (Primera Marca)',
    'Material impermeable de alta calidad',
    'Capucha desmontable para mayor versatilidad',
    'Precio Tarjeta: $60.000 (en 3 pagos)',
    'Promo Efectivo/Transferencia/DepÃ³sito: $50.000',
    'Talles disponibles: S al XXL'
  ],
  sizes: ['S', 'M', 'L', 'XL', 'XXL'],
  tag: 'especial'
}// <-- NO pongas coma si este es el Ãºltimo producto de la lista
];
// Helpers
const priceLabel = (p)=>{ if(typeof p.price==='number') return fmt(p.price); if(Array.isArray(p.priceRange)&&p.priceRange.length===2) return fmt(p.priceRange[0])+'â€“'+fmt(p.priceRange[1]); return 'Consultar precio'; };
const makeBadge = (tag)=> tag===''?"<span class='badge '></span>":(tag==='especial'?"<span class='badge especial'>ESPECIAL</span>":"");
const card = (p)=>`
Â  ${makeBadge(p.tag)}
Â  <img referrerpolicy="no-referrer" src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/240x160?text=Sin+Imagen'">
Â  <div class="product-name">${p.name}</div>
Â  <div class="product-price">${priceLabel(p)}</div>
Â  <div class='btn btn-primary' style='margin-top:auto;'>Ver detalles</div>`;
// Render grid
function renderProductsGrid(list){
Â  const grid=document.getElementById('productsGrid');
Â  grid.innerHTML='';
Â  const productos = list && Array.isArray(list) ? list : PRODUCTS;
Â  if(productos.length===0){
Â  Â  const ph=document.createElement('div'); ph.className='card'; ph.innerHTML='<strong>Sin productos</strong>';
Â  Â  grid.appendChild(ph); return;
Â  }
Â  productos.forEach(p=>{
Â  Â  const el=document.createElement('div');
Â  Â  el.className='card product-card';
Â  Â  el.dataset.id=p.id;
Â  Â  el.setAttribute('role','button');
Â  Â  el.setAttribute('tabindex','0');
Â  Â  el.setAttribute('aria-label','Ver detalles de ' + p.name);
Â  Â  el.innerHTML=card(p);
Â  Â  const open=()=>showProductDetail(p.id);
Â  Â  el.addEventListener('click', open);
Â  Â  el.addEventListener('keydown', ev=>{ if(ev.key==='Enter'||ev.key===' '){ ev.preventDefault(); open(); } });
Â  Â  grid.appendChild(el);
Â  });
}
// Build index
function buildIndex(){
Â  const cont = document.getElementById('catalogoIndice');
Â  const cats = Array.from(new Set(PRODUCTS.map(p=>p.categoria)));
Â  // CORREGIDO: Agregar 'chombas' al orden deseado
const ORDER = ['camperas','camisas','remeras','chombas','trajes','chalecos','pantalones']; 
Â  const ordered = ORDER.filter(c=>cats.includes(c)).concat(cats.filter(c=>!ORDER.includes(c)));
Â  cont.innerHTML = '';
Â  const btnAll = document.createElement('button');
Â  btnAll.className='btn btn-primary active';
Â  btnAll.dataset.cat='all';
Â  btnAll.textContent='Todos';
Â  cont.appendChild(btnAll);
Â  ordered.forEach(c=>{
Â  Â  const b=document.createElement('button');
Â  Â  b.className='btn'; b.dataset.cat=c; b.textContent = c.charAt(0).toUpperCase()+c.slice(1);
Â  Â  cont.appendChild(b);
Â  });
Â  cont.addEventListener('click', e=>{
Â  Â  const btn=e.target.closest('button[data-cat]'); if(!btn) return;
Â  Â  cont.querySelectorAll('button').forEach(b=>b.classList.remove('active','btn-primary'));
Â  Â  btn.classList.add('active','btn-primary');
Â  Â  const cat=btn.dataset.cat;
Â  Â  renderProductsGrid(cat==='all'?PRODUCTS:PRODUCTS.filter(p=>p.categoria===cat));
Â  Â  showCamisasPromoInGrid(cat);const header=document.querySelector('header'); const offset=(header?header.offsetHeight:70)+10;
Â  Â  const y=document.getElementById('productos').getBoundingClientRect().top + window.scrollY - offset;
Â  Â  window.scrollTo({behavior:'smooth', top:y});
Â  });
}
// Carousel builders
function buildCarousel(images){
Â  const imgs = images && images.length ? images : [];
Â  if(!imgs.length) return '<img referrerpolicy="no-referrer" src="https://via.placeholder.com/500x400?text=Sin+Imagen" alt="Imagen">';
Â  // CORREGIDO: Usar backticks y cerrar etiquetas correctamente
Â  const slides = imgs.map(obj => `<div class="carousel-slide"><img referrerpolicy="no-referrer" src="${(obj.src||obj)}" onerror="this.src='https://via.placeholder.com/500x400?text=Sin+Imagen'"></div>`).join('');
Â  const dots = imgs.map((_,i)=> `<span class="carousel-dot${i===0?' active':''}" data-i="${i}"></span>`).join('');
Â  return `
Â  Â  <div class="carousel" id="carousel">
Â  Â  Â  <button class="carousel-btn prev" aria-label="Anterior" data-dir="-1">â€¹</button>
Â  Â  Â  <div class="carousel-track" id="carouselTrack">${slides}</div>
Â  Â  Â  <button class="carousel-btn next" aria-label="Siguiente" data-dir="1">â€º</button>
Â  Â  Â  <div class="carousel-dots" id="carouselDots">${dots}</div>
Â  Â  Â  <div id="carouselCaption" style="text-align:center;margin-top:6px;font-weight:bold;color:#2d5a42"></div>
Â  Â  </div>`;
}
// === Precios por modelo (YSL) ===
const MODEL_PRICES = {
Â  'camisa-ysl': {
Â  Â  'modelo 01': 50000, 'modelo 02': 60000, 'modelo 03': 50000, 'modelo 04': 50000, 'modelo 05': 60000,
Â  Â  'modelo 06': 50000, 'modelo 07': 60000, 'modelo 08': 60000, 'modelo 09': 50000, 'modelo 10': 50000,
Â  Â  'modelo 11': 50000, 'modelo 12': 50000, 'modelo 13': 60000, 'modelo 14': 70000, 'modelo 15': 60000,
Â  Â  'modelo 16': 70000, 'modelo 17': 60000
Â  }
};
// Helpers de precio en detalle (sin tocar tu lÃ³gica de render)
function detailPriceForSelection(){
Â  if(!currentProduct) return null;
Â  if(selectedModel && MODEL_PRICES[currentProduct.id] && typeof MODEL_PRICES[currentProduct.id][selectedModel]==='number'){
Â  Â  return MODEL_PRICES[currentProduct.id][selectedModel];
Â  }
Â  if(typeof currentProduct.price==='number') return currentProduct.price;
Â  if(Array.isArray(currentProduct.priceRange)) return null;
Â  return null;
}
function updateDetailPriceUI(){
Â  const el = document.getElementById('detailPrice');
Â  const addBtn = document.getElementById('addBtn');
Â  if(!el) return;
Â  const priceNum = detailPriceForSelection();
Â  if(typeof priceNum==='number'){
Â  Â  el.textContent = fmt(priceNum);
Â  Â  if(addBtn){ addBtn.removeAttribute('disabled'); addBtn.disabled=false; addBtn.textContent='ğŸ›’ Agregar al Carrito'; }
Â  }else{
Â  Â  if(currentProduct && currentProduct.id==='camisa-ysl' && currentProduct.images && currentProduct.images[0]){
Â  Â  Â  selectedModel = currentProduct.images[0].model || currentProduct.images[0].alt || 'modelo 01';
Â  Â  Â  const p = detailPriceForSelection();
Â  Â  Â  if(typeof p==='number'){ el.textContent = fmt(p); if(addBtn){ addBtn.removeAttribute('disabled'); addBtn.disabled=false; addBtn.textContent='ğŸ›’ Agregar al Carrito'; } return; }
Â  Â  }
Â  Â  el.textContent = 'Consultar precio';
Â  Â  if(addBtn){ addBtn.setAttribute('disabled','disabled'); addBtn.disabled=true; addBtn.textContent='ğŸ›’ No disponible'; }
Â  }
}
let carouselIndex = 0;
function attachCarouselHandlers(){
Â  const track = document.getElementById('carouselTrack');
Â  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
Â  const prev = document.querySelector('.carousel-btn.prev');
Â  const next = document.querySelector('.carousel-btn.next');
Â  const caption = document.getElementById('carouselCaption');
Â  const colorNameSpan = document.getElementById('selectedColorName');

Â  const update = ()=>{
Â  Â  track.style.transform = `translateX(${-carouselIndex*100}%)`; // Backticks corregidos
Â  Â  dots.forEach((d,i)=>{ 
        d.classList.toggle('active', i===carouselIndex);
        // Sincronizar borde de chips si existen
       if (currentProduct.categoria === 'chombas' || currentProduct.categoria === 'trajes' || currentProduct.categoria === 'camperas') {
Â  Â  Â  Â  Â  Â  Â  Â  const chips = document.querySelectorAll('#colorChipsContainer span');
Â  Â  Â  Â  Â  Â  Â  Â  chips.forEach(c => c.style.border = '2px solid #ccc');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Marcar el chip actual
Â  Â  Â  Â  Â  Â  Â  Â  if (chips[carouselIndex]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chips[carouselIndex].style.border = '3px solid #1e3a2e';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Sincronizar selectedModel al deslizar
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedModel = chips[carouselIndex].dataset.colorName || null;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
    });
Â  Â  
Â  Â  updateModelAndPrice();
Â  Â  if(typeof updateDetailPriceUI==='function') updateDetailPriceUI();

Â  Â  if(currentProduct && Array.isArray(currentProduct.images) && currentProduct.images[carouselIndex]){
Â  Â  Â  const obj = currentProduct.images[carouselIndex];
Â  Â  Â  const label = (obj && (obj.model||obj.alt)) ? (obj.model||obj.alt) : '';
Â  Â  Â  if(caption) caption.textContent = label ? `Modelo: ${label}` : '';
Â  Â  Â  if (colorNameSpan) colorNameSpan.textContent = label ? label.toUpperCase() : '';
Â  Â  } else if (caption) {
Â  Â  Â  caption.textContent = '';
      if (colorNameSpan) colorNameSpan.textContent = '';
Â  Â  }
Â  };

  // LOOP INFINITO AQUI
Â  if(prev) prev.onclick = ()=>{ 
    carouselIndex = (carouselIndex > 0) ? carouselIndex - 1 : dots.length - 1; 
    update(); 
  };
Â  if(next) next.onclick = ()=>{ 
    carouselIndex = (carouselIndex < dots.length - 1) ? carouselIndex + 1 : 0; 
    update(); 
  };
  // FIN LOOP

Â  dots.forEach((d,i)=> d.onclick = ()=>{ carouselIndex = i; update(); });

Â  let startX=0, dx=0;
Â  const el = document.getElementById('carousel');
Â  if(el){
Â  Â  el.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; }, {passive:true});
Â  Â  el.addEventListener('touchmove', e=>{ dx = e.touches[0].clientX - startX; }, {passive:true});
Â  Â  el.addEventListener('touchend', ()=>{
Â  Â  Â  const total = dots.length;
Â  Â  Â  if(dx < -40) { // Swipe Izq (Siguiente con Loop)
          carouselIndex = (carouselIndex < total - 1) ? carouselIndex + 1 : 0;
      }
Â  Â  Â  if(dx > 40) { // Swipe Der (Anterior con Loop)
          carouselIndex = (carouselIndex > 0) ? carouselIndex - 1 : total - 1;
      }
Â  Â  Â  dx = 0; update();
Â  Â  });
Â  }
Â  update(); 
}

function showProductDetail(id, silent=false){
Â  prevScrollY = window.scrollY || window.pageYOffset || 0;
Â  const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
Â  currentProduct=p;
Â  selectedSize=null; selectedModel=null; carouselIndex = 0; 

Â  try{window.scrollTo(0,0);document.documentElement.scrollTop=0;document.body.scrollTop=0;}catch(e){}

Â  const productos=document.getElementById('productos');
Â  const detail=document.getElementById('productDetail');
Â  const hero=document.getElementById('inicio');
Â  if(productos) productos.style.display='none';
Â  if(hero) hero.style.display='none';
Â  if(detail) detail.style.display='block';

// ...
Â  const selector = document.getElementById('colorSelector');
Â  if (selector) selector.style.display = 'none';Â 

Â  // REEMPLAZA LA LÃNEA ANTERIOR por esta:
// CÃ“DIGO CORREGIDO (Incluye la lÃ³gica de carga de imagen si no hay carrusel)

Â  if (p.categoria === 'chombas' || p.categoria === 'trajes' || p.categoria === 'camperas') {Â 
Â  Â  Â  document.getElementById('detailImage').innerHTML = ''; // Limpiar el contenedor
Â  Â  Â  if (p.images && p.images.length > 1) { // Tiene carrusel de modelos (ej: nueva campera)
Â  Â  Â  Â  Â  document.getElementById('detailImage').innerHTML = buildCarousel(p.images);
Â  Â  Â  Â  Â  buildColorSelector(p);
Â  Â  Â  Â  Â  setTimeout(attachCarouselHandlers, 0);
Â  Â  Â  } else { // NO tiene carrusel (ej: camperas antiguas con solo p.image)
Â  Â  Â  Â  Â  // â¬‡ï¸ Â¡SOLUCIÃ“N! Cargar la imagen Ãºnica si no hay carrusel.
Â  Â  Â  Â  Â  document.getElementById('detailImage').innerHTML = `<img referrerpolicy="no-referrer" src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/500x400?text=Sin+Imagen'">`;
Â  Â  Â  Â  Â  selectedModel = null;Â 
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // Asegurarse de ocultar el selector de color si no es necesario.
Â  Â  Â  Â  Â  if (selector) selector.style.display = 'none'; 
Â  Â  Â  }
Â  } else if (p.images && p.images.length > 1) { // LÃ³gica para productos con imÃ¡genes, pero sin selector de color forzado (como camisas YSL)
Â  Â  Â  document.getElementById('detailImage').innerHTML = buildCarousel(p.images);
Â  Â  Â  if (p.images && p.images[0] && (p.images[0].model || p.images[0].alt)) {
Â  Â  Â  Â  Â  selectedModel = p.images[0].model || p.images[0].alt;
Â  Â  Â  }
Â  Â  Â  setTimeout(attachCarouselHandlers, 0);
Â  } else { // LÃ³gica para productos simples sin imÃ¡genes mÃºltiples (la lÃ³gica original)
Â  Â  Â  document.getElementById('detailImage').innerHTML = `<img referrerpolicy="no-referrer" src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/500x400?text=Sin+Imagen'">`;
Â  Â  Â  selectedModel = null;Â 
Â  }

Â  document.getElementById('detailName').textContent=p.name;
Â  updateDetailPriceUI(); 
Â  document.getElementById('detailDesc').textContent=p.description;
Â  const ul=document.getElementById('detailFeatures'); ul.innerHTML='';
Â  (p.features||[]).forEach(f=>{ const li=document.createElement('li'); li.textContent=f; ul.appendChild(li); });

Â  const szCont=document.getElementById('detailSizes'); szCont.innerHTML='';
Â  (p.sizes||[]).forEach(s=>{
Â  Â  const chip=document.createElement('span'); chip.className='size-chip'; chip.textContent=s;
Â  Â  chip.setAttribute('role','button'); chip.setAttribute('tabindex','0');
Â  Â  chip.setAttribute('aria-label','Seleccionar talle '+s);
Â  Â  
    const select=()=>{ 
        selectedSize=s; 
        szCont.querySelectorAll('.size-chip').forEach(c=>c.classList.remove('selected')); 
        chip.classList.add('selected'); 
        const warn=document.getElementById('sizeWarning'); if(warn) warn.style.display='none'; 
        
        updateMediosPago(p.categoria); 
        
        // Actualizar el Precio Grande al tocar talle
        const priceEl = document.getElementById('detailPrice');
        const newPrice = getPriceForCurrent(p);
        if(priceEl && newPrice !== null) {
            priceEl.textContent = fmt(newPrice);
        }
    };
    
Â  Â  chip.addEventListener('click', select);
Â  Â  chip.addEventListener('keydown', ev=>{ if(ev.key==='Enter'||ev.key===' '){ ev.preventDefault(); select(); } });
Â  Â  szCont.appendChild(chip);
Â  });

Â  const sizeWarn = document.getElementById('sizeWarning'); if(sizeWarn) sizeWarn.style.display='none';
Â  const addBtn=document.getElementById('addBtn');
Â  if(addBtn){
Â  Â  if(p.price==null && !p.priceRange && !p.sizePrices){ addBtn.setAttribute('disabled','disabled'); addBtn.textContent='ğŸ›’ No disponible'; }
Â  Â  else{ addBtn.removeAttribute('disabled'); addBtn.textContent='ğŸ›’ Agregar al Carrito'; }
Â  Â  updateDetailPriceUI();
Â  }
Â  showCamisasPromoInDetail(p.categoria==='camisas');
Â  updateMediosPago(p.categoria); 
Â  requestAnimationFrame(()=>{
Â  Â  const header = document.querySelector('header');
Â  Â  const offset = (header ? header.offsetHeight : 70) + 10;
Â  Â  const y = detail.getBoundingClientRect().top + window.scrollY - offset;
Â  Â  window.scrollTo({top:y, behavior:'smooth'});
Â  });
Â  if(!silent){ history.pushState({view:'detail', productId:id}, '', `#detalle-${id}`); }
}

function goHome(){
Â  selectedModel = null; // Resetear modelo al volver
  currentProduct = null; // Limpiar producto actual
Â  const detail=document.getElementById('productDetail');
Â  const productos=document.getElementById('productos');
Â  const hero=document.getElementById('inicio');
Â  if(detail) detail.style.display='none';
Â  if(hero) hero.style.display='block';
Â  if(productos) productos.style.display='block';
Â  requestAnimationFrame(()=>{ window.scrollTo({ top: prevScrollY, behavior:'smooth' }); });
Â  history.replaceState({view:'grid'}, document.title, window.location.pathname + window.location.search);
}
function goToProducts(){
Â  selectedModel = null; // Resetear modelo
  currentProduct = null; // Limpiar producto actual
Â  const hero=document.getElementById('inicio');
Â  const productos=document.getElementById('productos');
Â  const detail=document.getElementById('productDetail');
Â  if(detail) detail.style.display='none';
Â  if(hero) hero.style.display='block';
Â  if(productos) productos.style.display='block';
Â  const header=document.querySelector('header');
Â  const offset=(header?header.offsetHeight:70)+10;
Â  const y=productos.getBoundingClientRect().top + window.scrollY - offset;
Â  window.scrollTo({top:y, behavior:'smooth'});
Â  history.replaceState({view:'grid'}, document.title, window.location.pathname + window.location.search);
}

function addToCart(p) {
Â  if (!p) return;

  // Usar getCurrentModelLabel para asegurar que tomamos el modelo/color correcto
  let modeloActual = getCurrentModelLabel(p);
  let precioActual = getPriceForCurrent(p); // Usa la funciÃ³n helper para el precio

Â  // Validar precio y talle
Â  if (precioActual === null) {
Â  Â  alert('Error: No se pudo determinar el precio. Por favor, selecciona un modelo/color si es necesario.');
Â  Â  return;
Â  }
Â  if (!selectedSize) {
Â  Â  const warn = document.getElementById('sizeWarning');
Â  Â  if (warn) warn.style.display = 'block';
Â  Â  return;
Â  }

Â  const key = p.id + '::' + (modeloActual || 'default') + '::' + selectedSize; // AÃ±adir default si no hay modelo
Â  const found = cart.find(i => i.key === key);

Â  if (found) {
Â  Â  found.qty++;
Â  } else {
Â  Â  const itemParaCarrito = {
Â  Â  Â  ...p,
Â  Â  Â  qty: 1,
Â  Â  Â  key: key,
Â  Â  Â  size: selectedSize,
Â  Â  Â  modelo: modeloActual,
Â  Â  Â  price: precioActual // Asegura usar el precio correcto
Â  Â  };
    // Limpiar 'images' si existe para no guardar data innecesaria en el carrito
    delete itemParaCarrito.images;
Â  Â  cart.push(itemParaCarrito);
Â  }

Â  updateCartDisplay();
Â  const fab = document.getElementById('cartFab');
Â  if (fab) {
Â  Â  fab.classList.add('bounce');
Â  Â  setTimeout(() => fab.classList.remove('bounce'), 600);
Â  }
}

// REEMPLAZAR TODA LA FUNCIÃ“N updateCartDisplay

function updateCartDisplay(){
Â  const count=document.getElementById('cartCount'); 
Â  if(count) count.textContent=cart.reduce((a,b)=>a+b.qty,0);
Â  const items=document.getElementById('cartItems'); 
Â  if(!items) return; 
Â  items.innerHTML='';
Â  
Â  let total = 0;

Â  cart.forEach((item,i)=>{
Â  Â  const lineTotal = (item.price==null || isNaN(item.price))? 0 : item.price*item.qty; 
Â  Â  total += lineTotal;
Â  Â  
Â  Â  const unitPriceLabel = (item.price==null || isNaN(item.price))? '' : fmt(item.price);
Â  Â  const linePriceLabel = (item.price==null || isNaN(item.price))? 'A consultar' : fmt(lineTotal);
Â  Â  
Â  Â  let itemImageSrc = item.image;
Â  Â  const originalProduct = PRODUCTS.find(p => p.id === item.id);
Â  Â  if (originalProduct && originalProduct.images && item.modelo) {
Â  Â  Â  Â  const modelImage = originalProduct.images.find(img => img.model === item.modelo || img.alt === item.modelo);
Â  Â  Â  Â  if (modelImage) itemImageSrc = modelImage.src;
Â  Â  }

Â  Â  const div=document.createElement('div'); 
Â  Â  div.className='cart-item';
Â  Â  
div.innerHTML = `
Â  Â  Â  <div style="display: flex; gap: 15px; align-items: flex-start; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-top: 15px;">
Â  Â  Â  Â  <img src="${itemImageSrc}" alt="${item.name}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
Â  Â  Â  Â  <div style="flex-grow: 1;">
Â  Â  Â  Â  Â  <div style="font-weight: bold; margin-bottom: 4px;">${item.name}</div>
Â  Â  Â  Â  Â  <div style="font-size: 0.9rem; color: #555;">
Â  Â  Â  Â  Â  Â  ${item.modelo ? item.modelo + ' | ' : ''} Talle ${item.size || '-'}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="text-align: right; margin-top: 5px;">
Â  Â  Â  Â  Â  <button type="button" style="background: none; border: none; color: #e74c3c; cursor: pointer; padding: 0;" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="event.stopPropagation(); removeItem('${item.key}')">
Â  Â  Â  Â  Â  Â  ğŸ—‘ï¸
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 10px; margin-bottom: 10px;">
Â  Â  Â  Â  <div class="cart-controls" style="display:flex; align-items:center; border: 1px solid #ccc; border-radius: 4px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="updateQuantity(${i}, -1, event)">-</button>
Â  Â  Â  Â  Â  <span style="min-width: 30px; text-align: center; font-weight: bold; font-size: 1rem;">${item.qty}</span>
Â  Â  Â  Â  Â  <button type="button" onclick="updateQuantity(${i}, 1, event)">+</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <span style="font-weight: bold; font-size: 1.1rem;">${linePriceLabel}</span>
Â  Â  Â  </div>
Â  Â  `;
Â  Â  items.appendChild(div);
Â  });
Â  
Â  if (cart.length > 0) {
Â  Â  const subtotalDiv = document.createElement('div');
Â  Â  subtotalDiv.innerHTML = `
Â  Â  Â  <div style="margin-top: 20px;">
Â  Â  Â  Â  <div style="font-weight: bold; margin-bottom: 10px;">Subtotal (sin envÃ­o): <span style="float: right;">${fmt(total)}</span></div>
Â  Â  Â  </div>
Â  Â  Â  
Â  Â  Â  <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #333;">
Â  Â  Â  Â  <div style="display: flex; justify-content: space-between; font-size: 1.4rem;">
Â  Â  Â  Â  Â  <span>Total:</span>
Â  Â  Â  Â  Â  <span style="font-weight: bold; color: var(--verde-oscuro);">${fmt(total)}</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  `;
Â  Â  items.appendChild(subtotalDiv);
Â  } else {
Â  Â  items.innerHTML = '<div style="text-align: center; padding: 30px;">El carrito estÃ¡ vacÃ­o.</div>';
Â  }
Â  
Â  const totalEl=document.getElementById('cartTotal'); 
Â  if(totalEl) totalEl.innerHTML = '';
}
function updateQuantity(i, change, event){
Â  Â  // Asegura que el evento no se propague al fondo (soluciona el cierre del carrito)
Â  Â  if (event) event.stopPropagation();

Â  Â  if (!cart[i]) return; // Evitar error si el item ya no existe
Â  Â  cart[i].qty+=change;
Â  Â  if(cart[i].qty<=0){cart.splice(i,1);}
Â  Â  updateCartDisplay();
}
function clearCart(){ cart = []; updateCartDisplay(); }
  function removeItem(itemKey) {
Â  Â  // Busca el Ã­ndice del elemento en el carrito usando la clave Ãºnica
Â  Â  const index = cart.findIndex(item => item.key === itemKey);
Â  Â Â 
Â  Â  if (index > -1) {
Â  Â  Â  Â  // Elimina el elemento del array del carrito
Â  Â  Â  Â  cart.splice(index, 1);
Â  Â  Â  Â  // Actualiza la visualizaciÃ³n del carrito
Â  Â  Â  Â  updateCartDisplay();
Â  Â  Â  Â  // Si no quedan items, cierra el panel
Â  Â  Â  Â  if (cart.length === 0) {
Â  Â  Â  Â  Â  Â  toggleCart();
Â  Â  Â  Â  }
Â  Â  }
}
function toggleCart(){
Â  const m=document.getElementById('cartModal'); if(!m) return;
Â  
Â  // INICIO DEL NUEVO CÃ“DIGO (LÃ³gica del Panel Lateral):
Â  const opening = !m.classList.contains('visible'); 

Â  if(opening){ 
Â  Â  m.classList.add('visible');
Â  Â  lockBodyScroll(); 
Â  } else { 
Â  Â  m.classList.remove('visible');
Â  Â  setTimeout(unlockBodyScroll, 300);
Â  }
Â  // FIN DEL NUEVO CÃ“DIGO
}

function checkout() {
Â  if (cart.length === 0) {
Â  Â  alert('El carrito estÃ¡ vacÃ­o');
Â  Â  return;
Â  }
Â  let lines = ['Â¡Hola buenas! Quiero hacer un pedido de las siguientes prendas:', '', 'ğŸ“‹ RESUMEN DEL PEDIDO:', 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'];

Â  cart.forEach(it => {
    // CORREGIDO: Usar backticks para template literal
Â  Â  lines.push(`â€¢ ${it.name}`);
Â  Â  if (it.modelo) {
Â  Â  Â  lines.push(`Â  Modelo: ${it.modelo}`);
Â  Â  }
Â  Â  lines.push(`Â  Talle ${it.size || '-'}: ${it.qty} unidades`);
Â  Â  if (typeof it.price === 'number' && !isNaN(it.price)) {
Â  Â  Â  lines.push(`Â  Precio unitario: ${fmt(it.price)}`);
Â  Â  Â  lines.push(`Â  Subtotal: ${fmt(it.price * it.qty)}`);
Â  Â  } else {
Â  Â  Â  lines.push(`Â  Precio: A consultar`);
Â  Â  }
Â  Â  lines.push('');
Â  });

Â  const total = cart.reduce((s, it) => s + ((it.price == null || isNaN(it.price)) ? 0 : it.price * it.qty), 0); // Validar NaN
Â  lines.push('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
  // CORREGIDO: Usar backticks para template literal
Â  lines.push(`ğŸ’° TOTAL: ${fmt(total)}`);
Â  lines.push('');
Â  lines.push('Â¡Espero su confirmaciÃ³n! ğŸ˜Š');

Â  const msg = encodeURIComponent(lines.join('\n'));
  // CORREGIDO: Usar backticks para template literal
Â  window.open(`https://wa.me/${WA_NUMBER}?text=${msg}`, '_blank');
}

// WhatsApp FAB & botÃ³n detalle
document.getElementById('whatsappFab').addEventListener('click',()=>{
Â  const msg=encodeURIComponent('Â¡Hola! Me interesa conocer mÃ¡s sobre los productos de Algas.');
  // CORREGIDO: Usar backticks para template literal
  window.open(`https://wa.me/${WA_NUMBER}?text=${msg}`, '_blank');
});

function consultarWhatsApp() {
Â  if (!currentProduct) return;

  let modeloActual = getCurrentModelLabel(currentProduct); // Usar helper
  let precioActual = getPriceForCurrent(currentProduct);   // Usar helper

Â  // CORREGIDO: Usar backticks para template literal
Â  let mensaje = `Hola, quiero consultar por el producto:\n\nğŸ“Œ ${currentProduct.name}`;

Â  if (modeloActual) {
    // CORREGIDO: Usar backticks para template literal
Â  Â  mensaje += `\nğŸ§µ Modelo: ${modeloActual}`;
Â  }

Â  if (typeof precioActual === 'number') {
    // CORREGIDO: Usar backticks para template literal
Â  Â  mensaje += `\nğŸ’² Precio: ${fmt(precioActual)}`;
Â  }

Â  if (selectedSize) {
    // CORREGIDO: Usar backticks para template literal
Â  Â  mensaje += `\nğŸ“ Talle: ${selectedSize}`;
Â  }

  // CORREGIDO: Usar backticks para template literal
Â  const url = `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(mensaje)}`;
Â  window.open(url, '_blank');
}

// NavegaciÃ³n
document.addEventListener('click', (e)=>{
Â  const btn=e.target.closest('#backHome'); if(btn){ e.preventDefault(); goHome(); }
});
document.getElementById('btnVerProductos').addEventListener('click', (e)=>{ e.preventDefault(); goToProducts(); });
// FAB de WhatsApp sube al detectar footer
(function(){
  const fab=document.getElementById('whatsappFab');
  const footer=document.querySelector('footer');
  if(fab&&footer&&'IntersectionObserver'in window){
    const io=new IntersectionObserver(es=>{es.forEach(e=>{
      fab.classList.toggle('lifted', e.isIntersecting); // Simplificado
    })}, {root:null,threshold:0});
    io.observe(footer);
  }
})();
// History/back - CORREGIDO para usar goHome()
window.addEventListener('popstate', (event)=>{
Â  // Verifica si el estado al que volvemos es la vista de detalle
  // (esto maneja el caso de usar el botÃ³n "Adelante" del navegador)
  if(event.state && event.state.view==='detail'){
Â  Â  const pid = event.state.productId;
    // Si vamos HACIA un detalle, lo mostramos (sin scroll suave)
Â  Â  showProductDetail(pid, true); // true evita aÃ±adir mÃ¡s historial
Â  } else {
    // SI NO es un estado 'detail', significa que estamos volviendo DESDE un detalle HACIA la grilla.
    // Llamamos a goHome() que ya contiene la lÃ³gica de ocultar/mostrar y el scroll suave.
    goHome();
  }
});
// Init
document.addEventListener('DOMContentLoaded', ()=>{
Â  // window.scrollTo(0,0); setTimeout(()=>window.scrollTo(0,0),0); // Puede ser problemÃ¡tico, mejor quitar
Â  buildIndex();
  renderProductsGrid(PRODUCTS);
  showCamisasPromoInGrid('all');
  updateCartDisplay(); // Actualizar carrito por si habÃ­a algo guardado (no implementado aquÃ­)

Â  const hash = location.hash || '';
Â  if(hash.startsWith('#detalle-')){
Â  Â  const pid = hash.replace('#detalle-','');
Â  Â  const p = PRODUCTS.find(x=>x.id===pid);
Â  Â  if(p){
      showProductDetail(pid, true); // Mostrar detalle directamente
      // No reemplazar estado aquÃ­, dejar que showProductDetail lo maneje si no es silent
    } else {
      // Si el ID no es vÃ¡lido, limpiar hash y mostrar grilla
      history.replaceState({view:'grid'}, document.title, window.location.pathname + window.location.search);
    }
Â  }else{
Â  Â  history.replaceState({view:'grid'}, document.title, window.location.pathname + window.location.search); // Estado inicial
Â  }
});

// === Helpers robustos YSL ===
function getCurrentModelLabel(p){
Â  try{
    // Priorizar selectedModel si existe (seteado por carrusel o selector de color)
Â  Â  if (selectedModel) return selectedModel;
Â  Â  if (!p || !p.images || p.images.length === 0) return null;
    // Si no hay selectedModel, intentar obtener del Ã­ndice actual (carouselIndex)
Â  Â  if (typeof carouselIndex==='number' && p.images[carouselIndex]){
Â  Â  Â  return p.images[carouselIndex].model || p.images[carouselIndex].alt || null;
Â  Â  }
    // Fallback al primer modelo/alt si existe
Â  Â  return p.images[0].model || p.images[0].alt || null;
Â  }catch(e){ console.error("Error en getCurrentModelLabel:", e); }
Â  return null;
}

function getPriceForCurrent(p){
Â  try{
Â  Â  if(!p) return null;
Â  Â  const currentModel = getCurrentModelLabel(p);

    // LÃ³gica de precio por talle (Pima)
    if (p.sizePrices && selectedSize) {
        return p.sizePrices[selectedSize];
    }

Â  Â  if (p.id==='camisa-ysl' && currentModel && MODEL_PRICES['camisa-ysl'] && typeof MODEL_PRICES['camisa-ysl'][currentModel]==='number'){
Â  Â  Â  return MODEL_PRICES['camisa-ysl'][currentModel];
Â  Â  }
Â  Â  if (typeof p.price==='number') return p.price;
Â  Â  if (!Array.isArray(p.priceRange)) return null;
Â  }catch(e){ console.error("Error en getPriceForCurrent:", e); }
Â  return null;
}

function updateModelAndPrice(){
Â  try{
Â  Â  if(!currentProduct || !currentProduct.images) return; // Salir si no hay producto o imÃ¡genes

    // Sincronizar selectedModel desde el Ã­ndice actual del carrusel/selector
    if (currentProduct.images.length > 0 && typeof carouselIndex === 'number' && currentProduct.images[carouselIndex]){
      const currentImageObj = currentProduct.images[carouselIndex];
      selectedModel = currentImageObj.model || currentImageObj.alt || null;
    } else {
      selectedModel = null; // No hay imÃ¡genes o Ã­ndice invÃ¡lido
    }

Â  Â  // Actualizar UI de precio (si existe)
Â  Â  const priceEl = document.getElementById('detailPrice');
Â  Â  if(priceEl){
Â  Â  Â  const n = getPriceForCurrent(currentProduct); // Usar helper para obtener precio correcto
Â  Â  Â  if(typeof n === 'number'){
Â  Â  Â  Â  priceEl.textContent = fmt(n);
Â  Â  Â  } else {
        // Mostrar etiqueta de precio base o 'Consultar' si no se puede determinar
        priceEl.textContent = priceLabel(currentProduct);
      }
Â  Â  }
    // Actualizar tambiÃ©n el botÃ³n de agregar por si el precio cambiÃ³ (YSL)
    updateDetailPriceUI();

Â  }catch(e){ console.error("Error en updateModelAndPrice:", e); }
}
function buildColorSelector(product) {
    const selector = document.getElementById('colorSelector');
    const container = document.getElementById('colorChipsContainer');
    const nameDisplay = document.getElementById('selectedColorName');
    const detailImageContainer = document.getElementById('detailImage');

    // MAPA UNIFICADO DE COLORES
    const hexMap = {
        'Gris': '#808080', 'Rosa': '#FFC0CB', 'Negro': '#000000', 'Blanco': '#FFFFFF',
        'Naranja': '#e67315', 'Bordo': '#800000', 'Celeste': '#87CEEB', 'Mostaza': '#FFDB58',
        'Verde': '#00A36C', 'Marron': '#8B4513', 'Azul': '#0000FF',
        
        // Pima Nombres Exactos
        'Rosa PÃ¡lido': '#D4A9A6', 'Beige / Arena': '#d1b27a', 'celeste Claro': '#A9D7EC',   
        'Gris ': '#A8A8A8', 'Verde Militar': '#4C6556', 'Azul Marino ': '#1A233A',
        'Azul claro': '#26364D', ' Negro': '#171F27',
      
      'Mostaza y Blanco': '#FFDB58,#FFFFFF', 
Â  Â  Â  Â  'Rojo y Azul': '#E74C3C,#2980B9', Â  Â  Â 
Â  Â  Â  Â  'Gris y Blanco': '#A9A9A9,#FFFFFF'
    };
    
if (product.categoria !== 'chombas' && product.categoria !== 'trajes' && product.categoria !== 'camperas') {
Â  Â  Â  Â  if (selector) selector.style.display = 'none';
Â  Â  Â  Â  return;
Â  Â  }
    if (!product.images || product.images.length < 2) {
        if (selector) selector.style.display = 'none';
        return;
    }

    selector.style.display = 'block';
    container.innerHTML = '';

    product.images.forEach((img, index) => {
        const colorName = img.model || 'Color ' + (index + 1);
        let colorCode = hexMap[colorName] || '#555'; 

        const chip = document.createElement('span');
        chip.style.width = '30px'; chip.style.height = '30px';
        chip.style.borderRadius = '50%';
        chip.style.border = index === 0 ? '3px solid #1e3a2e' : '2px solid #ccc';
        if (colorCode.includes(',')) {
Â  Â  Â  Â  Â  Â  const [color1, color2] = colorCode.split(',');
Â  Â  Â  Â  Â  Â  // Crea el efecto diagonal de dos colores
Â  Â  Â  Â  Â  Â  chip.style.background = `linear-gradient(135deg, ${color1} 0%, ${color1} 49%, #FFFFFF 49%, #FFFFFF 51%, ${color2} 51%, ${color2} 100%)`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Mantiene el color sÃ³lido para los chips normales
Â  Â  Â  Â  Â  Â  chip.style.backgroundColor = colorCode;
Â  Â  Â  Â  }
        chip.style.cursor = 'pointer';
        chip.dataset.index = index;
        chip.dataset.colorName = colorName; 
        chip.dataset.imageSrc = img.src;
        chip.style.boxShadow = '0 0 4px rgba(0,0,0,0.2)';

        chip.onclick = function() {
            container.querySelectorAll('span').forEach(c => c.style.border = '2px solid #ccc');
            this.style.border = '3px solid #1e3a2e';
            
            const dot = document.querySelector(`.carousel-dot[data-i="${this.dataset.index}"]`);
            if (dot) dot.click();

            selectedModel = this.dataset.colorName; 
            carouselIndex = parseInt(this.dataset.index);
            nameDisplay.textContent = this.dataset.colorName.toUpperCase();
            updateDetailPriceUI();
        };
        container.appendChild(chip);
    });

    if (product.images.length > 0) {
        const firstColorName = product.images[0].model || 'Color 1';
        selectedModel = firstColorName; 
        carouselIndex = 0;
        nameDisplay.textContent = firstColorName.toUpperCase();
        if(!document.getElementById('carousel')) {
             detailImageContainer.innerHTML = `<img referrerpolicy="no-referrer" src="${product.images[0].src}" alt="${product.name} - ${firstColorName}">`;
        }
    }
}
// === FIN NUEVA FUNCIÃ“N ===

// Garantizar botÃ³n #btnAsk en el detalle (no necesario, ya estÃ¡ en HTML)
/*(function(){
Â  const container = document.querySelector('#productDetail .detail-info'); // Ajustado selector
Â  if(container && !document.getElementById('btnAsk')){
Â  Â  const b = document.createElement('button');
Â  Â  b.id='btnAsk'; b.className='btn'; b.style.background='#25d366'; b.style.color='#fff';
    b.onclick = consultarWhatsApp; // Asignar funciÃ³n existente
    b.innerHTML = '<img src="https://i.ibb.co/BV91S86b/image.png" alt="WhatsApp" style="height:20px;width:20px;vertical-align:middle;margin-right:8px">Consultar por WhatsApp';
Â  Â  container.querySelector('.detail-buttons').appendChild(b); // AÃ±adir a los botones existentes
Â  }
})();*/
  
  // CÃ“DIGO PARA CERRAR EL CARRITO AL CLIC FUERA (DEBE ESTAR AL FINAL DEL <SCRIPT>)
document.addEventListener('click', function(e) {
    const modal = document.getElementById('cartModal');
    if (!modal) return;
    
    // Si el carrito estÃ¡ visible
    if (modal.classList.contains('visible')) {
        const modalContent = modal.querySelector('.modal-content');
        
        // Verifica si el clic ocurriÃ³ fuera del contenido del modal
        if (!modalContent.contains(e.target)) {
            // Verifica que el clic NO haya sido en el botÃ³n de abrir (para evitar doble acciÃ³n)
            if (e.target.closest('#cartFab') === null) {
                toggleCart();
            }
        }
    }
});
</script>

</body>
</html>
